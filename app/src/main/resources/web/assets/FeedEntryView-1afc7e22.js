import{o as a,c as r,b as o,d as Q,u as D,r as m,U as Z,c1 as z,I as R,t as f,a1 as O,Q as b,v as A,e as w,g as q,f as $,n as P,s as X,a as Y,i as F,c2 as J,bq as K,c3 as W,H as ee,P as te,k as x,w as B,X as ne,_ as se}from"./index-79f9263f.js";import{_ as oe}from"./FieldId-d1ec1c14.js";import{u as ae}from"./markdown-32d70f3e.js";import{_ as ie}from"./VModal.vuevuetypescriptsetuptruelang-3158168b.js";import{l as I,_ as le}from"./Multiselect-6b10a69c.js";const ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},de=o("path",{fill:"currentColor",d:"M5 21q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h6q.425 0 .713.288T12 4q0 .425-.288.713T11 5H5v14h14v-6q0-.425.288-.713T20 12q.425 0 .713.288T21 13v6q0 .825-.588 1.413T19 21H5Zm4-6q-.275-.275-.275-.7T9 13.6L17.6 5H15q-.425 0-.713-.288T14 4q0-.425.288-.713T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10q-.425 0-.713-.288T19 9V6.4l-8.625 8.625q-.275.275-.675.275T9 15Z"},null,-1),re=[de];function _e(d,s){return a(),r("svg",ce,re)}const ue={name:"material-symbols-open-in-new-rounded",render:_e},pe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},me=o("path",{fill:"currentColor",d:"M15.375 19.25q-.525.25-.95-.038T14 18.275q0-.25.163-.487t.412-.363q1.575-.75 2.5-2.225T18 11.95q0-1.125-.425-2.187T16.25 7.8L16 7.55V9q0 .425-.288.713T15 10q-.425 0-.713-.288T14 9V5q0-.425.288-.713T15 4h4q.425 0 .713.288T20 5q0 .425-.288.713T19 6h-1.75l.4.35q1.225 1.225 1.788 2.663T20 11.95q0 2.4-1.25 4.363t-3.375 2.937ZM5 20q-.425 0-.713-.288T4 19q0-.425.288-.713T5 18h1.75l-.4-.35q-1.225-1.225-1.788-2.663T4 12.05q0-2.4 1.25-4.362T8.625 4.75q.525-.25.95.038t.425.937q0 .25-.163.488t-.412.362q-1.575.75-2.5 2.225T6 12.05q0 1.125.425 2.188T7.75 16.2l.25.25V15q0-.425.288-.713T9 14q.425 0 .713.288T10 15v4q0 .425-.288.713T9 20H5Z"},null,-1),he=[me];function ye(d,s){return a(),r("svg",pe,he)}const Te={name:"material-symbols-sync-rounded",render:ye},qe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ve=o("path",{fill:"currentColor",d:"M7.25 20q-.475 0-.775-.375T6.3 18.8L7 16H4.775q-.5 0-.8-.388T3.8 14.75q.075-.35.35-.55t.625-.2H7.5l1-4H5.775q-.5 0-.8-.388T4.8 8.75q.075-.35.35-.55t.625-.2H9l.825-3.275Q9.9 4.4 10.15 4.2t.6-.2q.475 0 .775.375t.175.825L11 8h4l.825-3.275q.075-.325.325-.525t.6-.2q.475 0 .775.375t.175.825L17 8h2.225q.5 0 .8.387t.175.863q-.075.35-.35.55t-.625.2H16.5l-1 4h2.725q.5 0 .8.388t.175.862q-.075.35-.35.55t-.625.2H15l-.825 3.275q-.075.325-.325.525t-.6.2q-.475 0-.775-.375T12.3 18.8L13 16H9l-.825 3.275q-.075.325-.325.525t-.6.2Zm2.25-6h4l1-4h-4l-1 4Z"},null,-1),ge=[ve];function fe(d,s){return a(),r("svg",qe,ge)}const be={name:"material-symbols-tag-rounded",render:fe},we=["disabled"],$e=Q({__name:"UpdateTagRelationsModal",props:{tagType:{type:String,required:!0},tags:{type:Array,default:()=>[]},item:{type:Object},selected:{type:Array,default:()=>[]}},setup(d){const s=d,{t:_}=D(),u=m(s.selected),{mutate:h,loading:t,onDone:p}=Z({document:z,appApi:!0});p(()=>{R.emit("refetch_by_tag_type",s.tagType),f(_("saved")),O()});const y=()=>{const l=u.value.map(c=>c.id),i=s.selected.map(c=>c.id);h({tagType:s.tagType,addTagIds:I.difference(l,i),item:s.item,removeTagIds:I.difference(i,l)})};return(l,i)=>{const c=le,v=ie;return a(),b(v,{title:l.$t("add_to_tags")},{body:A(()=>[w(c,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=g=>u.value=g),label:"name","track-by":"id",options:d.tags},null,8,["modelValue","options"])]),action:A(()=>[o("button",{type:"button",disabled:q(t),class:"btn",onClick:y},$(l.$t("save")),9,we)]),_:1},8,["title"])}}}),Ce={class:"container"},ke={class:"title"},He={class:"subtitle"},Ve={key:1,class:"author"},Le=["title","onClick"],Me=["disabled","title","onClick"],Ee={key:0,class:"spinner spinner-sm"},Ae=["href","title"],Fe=["innerHTML"],xe=Q({__name:"FeedEntryView",setup(d){const{t:s}=D(),_="FEED_ENTRY",u=P(),h=m(u.params.id),t=m(),p=m(""),y=m(),{app:l}=X(Y()),{render:i}=ae(l),{refetch:c}=F({handle:async(e,n)=>{n?f(s(n),"error"):(t.value=e.feedEntry,p.value=await i(e.feedEntry.content||e.feedEntry.description))},document:J,variables:()=>({id:h.value}),appApi:!0});F({handle:(e,n)=>{n?f(s(n),"error"):e&&(y.value=e.tags)},document:K,variables:{type:_},appApi:!0});function v(){var e,n,T;ne($e,{tagType:_,tags:y.value,item:{key:(e=t.value)==null?void 0:e.id,title:(n=t.value)==null?void 0:n.title,size:0},selected:(T=t.value)==null?void 0:T.tags})}const{mutate:g,loading:C,onDone:G}=Z({document:W,appApi:!0});G(async e=>{const n=e.data;t.value=n.syncFeedContent,p.value=await i(n.syncFeedContent.content||n.syncFeedContent.description)});const N=()=>{g({id:h.value})};return ee(()=>{R.on("refetch_by_tag_type",e=>{e===_&&c()})}),(e,n)=>{var k,H,V,L,M,E;const T=oe,S=be,U=Te,j=ue;return a(),r("div",Ce,[o("h2",ke,$((k=t.value)==null?void 0:k.title),1),o("div",He,[(H=t.value)!=null&&H.publishedAt?(a(),b(T,{key:0,class:"time",id:q(te)((V=t.value)==null?void 0:V.publishedAt),raw:t.value},null,8,["id","raw"])):x("",!0),(L=t.value)!=null&&L.author?(a(),r("span",Ve,$((M=t.value)==null?void 0:M.author),1)):x("",!0),o("button",{class:"btn-icon",title:e.$t("add_to_tags"),onClick:B(v,["prevent"])},[w(S,{class:"bi"})],8,Le),o("button",{class:"btn-icon",disabled:q(C),title:e.$t("sync_content"),onClick:B(N,["prevent"])},[q(C)?(a(),r("i",Ee)):(a(),b(U,{key:1,class:"bi"}))],8,Me),o("a",{href:(E=t.value)==null?void 0:E.url,target:"_blank",class:"btn-icon",title:e.$t("view_original_article")},[w(j,{class:"bi"})],8,Ae)]),o("div",{class:"md-container",innerHTML:p.value},null,8,Fe)])}}});const Re=se(xe,[["__scopeId","data-v-620b0e9e"]]);export{Re as default};
