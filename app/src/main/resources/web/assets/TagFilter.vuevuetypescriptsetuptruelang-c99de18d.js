import{d as k,u as A,p as x,r as S,i as E,t as L,bm as M,o as r,c as i,b as l,j as $,f as c,w as g,F as f,y as N,x as Q,g as V,Y as u,V as b,bn as q,z as D,S as G,bo as I,bp as B}from"./index-e1652ff6.js";import{c as F}from"./index-e0661b3d.js";import{k as _,b as O}from"./search-884e3ac4.js";import{_ as y}from"./EditValueModal.vuevuetypescriptsetuptruelang-469b8764.js";import{_ as w}from"./DeleteConfirm.vuevuetypescriptsetuptruelang-69f1cb30.js";const z={class:"nav-title mt-4"},Y=["onClick"],j={class:"nav"},H=["onClick","onContextmenu"],W=k({__name:"TagFilter",props:{tagType:{type:String,required:!0},selected:{type:String,required:!0}},setup(s){const o=s,{t:a}=A(),C=x(),p=S([]),{refetch:m}=E({handle:(e,t)=>{t?L(a(t),"error"):e&&(p.value=e.tags)},document:M,variables:{type:o.tagType},appApi:!0});function T(){u(y,{title:a("add_tag"),placeholder:a("name"),mutation:()=>b({document:q,options:{update:()=>{m()}},appApi:!0}),getVariables:e=>({type:o.tagType,name:e})})}function v(e){const t=O([{name:"tag",op:"",value:_(e.name)}]);D(C,`/${{NOTE:"notes",AUDIO:"audios",IMAGE:"images",VIDEO:"videos",FEED_ENTRY:"feeds",SMS:"messages",CALL:"calls",CONTACT:"contacts",AI_CHAT:"aichats"}[o.tagType]}?q=${G(t)}`)}function h(e,t){e.preventDefault(),F({x:e.x,y:e.y,items:[{label:a("rename"),onClick:()=>{u(y,{title:a("rename"),placeholder:a("name"),value:t.name,mutation:()=>b({document:I,appApi:!0}),getVariables:n=>({id:t.id,name:n}),done:()=>{m()}})}},{label:a("delete"),onClick:()=>{u(w,{id:t.id,name:t.name,gql:B,appApi:!0,typeName:"Tag"})}}]})}return(e,t)=>(r(),i(f,null,[l("h2",z,[$(c(e.$t("tags"))+" ",1),l("button",{class:"btn btn-sm",type:"button",onClick:g(T,["prevent"])},c(e.$t("add")),9,Y)]),l("ul",j,[(r(!0),i(f,null,N(p.value,n=>(r(),i("li",{onClick:g(d=>v(n),["prevent"]),onContextmenu:d=>h(d,n),class:Q({active:s.selected&&V(_)(n.name)===s.selected})},c(n.name),43,H))),256))])],64))}});export{W as _};
