var O=Object.defineProperty;var P=(i,o,s)=>o in i?O(i,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[o]=s;var y=(i,o,s)=>(P(i,typeof o!="symbol"?o+"":o,s),s);import{_ as W}from"./MonacoEditor.vuevuetypescriptsetuptruelang-f094b629.js";import{o as Z,c as M,b as e,d as z,u as A,r as h,a4 as S,i as G,t as J,Z as F,bh as B,V as X,e as b,g as l,K as u,a6 as _,f as p,N as L,O as U,L as Y,bi as ee,w as se}from"./index-71bc54e4.js";import{_ as oe}from"./EditToolbar.vuevuetypescriptsetuptruelang-28a76505.js";import{_ as te}from"./Breadcrumb-9e507271.js";import{u as ne,a as D}from"./vee-validate.esm-b28bbd9f.js";const ae={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},le=e("path",{fill:"currentColor",d:"M12 16q1.875 0 3.188-1.313T16.5 11.5q0-1.875-1.313-3.188T12 7q-1.875 0-3.188 1.313T7.5 11.5q0 1.875 1.313 3.188T12 16Zm0-1.8q-1.125 0-1.913-.788T9.3 11.5q0-1.125.788-1.913T12 8.8q1.125 0 1.913.788T14.7 11.5q0 1.125-.787 1.913T12 14.2Zm0 4.8q-3.475 0-6.35-1.838T1.3 12.2q-.075-.125-.1-.312t-.025-.388q0-.2.025-.388t.1-.312q1.475-3.125 4.35-4.963T12 4q3.475 0 6.35 1.838T22.7 10.8q.075.125.1.313t.025.387q0 .2-.025.388t-.1.312q-1.475 3.125-4.35 4.963T12 19Zm0-7.5Zm0 5.5q2.825 0 5.188-1.488T20.8 11.5q-1.25-2.525-3.613-4.013T12 6Q9.175 6 6.812 7.488T3.2 11.5q1.25 2.525 3.613 4.013T12 17Z"},null,-1),ie=[le];function ce(i,o){return Z(),M("svg",ae,ie)}const de={name:"material-symbols-visibility-outline-rounded",render:ce},re={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ue=e("path",{fill:"currentColor",d:"m16.1 13.3l-1.45-1.45q.225-1.175-.675-2.2t-2.325-.8L10.2 7.4q.425-.2.863-.3T12 7q1.875 0 3.188 1.313T16.5 11.5q0 .5-.1.938t-.3.862Zm3.2 3.15l-1.45-1.4q.95-.725 1.688-1.587T20.8 11.5q-1.25-2.525-3.588-4.013T12 6q-.725 0-1.425.1T9.2 6.4L7.65 4.85q1.025-.425 2.1-.638T12 4q3.575 0 6.425 1.887T22.7 10.8q.075.125.1.313t.025.387q0 .2-.037.388t-.088.312q-.575 1.275-1.437 2.35t-1.963 1.9Zm-.2 5.45l-3.5-3.45q-.875.275-1.762.413T12 19q-3.575 0-6.425-1.888T1.3 12.2q-.075-.125-.1-.312t-.025-.388q0-.2.025-.375t.1-.3Q1.825 9.7 2.55 8.75T4.15 7L2.075 4.9Q1.8 4.625 1.8 4.212t.3-.712q.275-.275.7-.275t.7.275l17 17q.275.275.288.688t-.288.712q-.275.275-.7.275t-.7-.275ZM5.55 8.4q-.725.65-1.325 1.425T3.2 11.5q1.25 2.525 3.588 4.013T12 17q.5 0 .975-.063t.975-.137l-.9-.95q-.275.075-.525.113T12 16q-1.875 0-3.188-1.312T7.5 11.5q0-.275.038-.525t.112-.525L5.55 8.4Zm7.975 2.325ZM9.75 12.6Z"},null,-1),me=[ue];function _e(i,o){return Z(),M("svg",re,me)}const pe={name:"material-symbols-visibility-off-outline-rounded",render:_e};class ${constructor(){y(this,"line","");y(this,"key","");y(this,"value","")}update(o,s){this.line=this.line.replace(new RegExp(`^(${o}s*=s*).+$`),(n,a)=>a+s),this.value=s}static create(o,s){const n=new $;return n.key=o,n.value=s,n.line=`${o} = ${s}`,n}}function H(i){const o=[],s=i.split(`
`);for(const n of s){const a=n.split("="),r=new $;r.line=n,a.length>1&&(r.key=a[0].trimEnd(),r.value=a[1].trimStart()),o.push(r)}return o}function C(i,o,s){let n=i.find(a=>a.key==o);n?n.update(o,s):(n=$.create(o,s),i.push(n))}const fe={class:"page-container container"},ve={class:"main"},he={class:"mt-3"},be={class:"row mb-3"},qe={for:"is-enabled",class:"col-sm-3 col-md-2 col-form-label"},ge={class:"col-sm-4"},Te={class:"form-check"},we={class:"row mb-3"},ye={for:"ssid",class:"col-sm-3 col-md-2 col-form-label"},$e={class:"col-sm-4"},ke={class:"row mb-3"},Ve={for:"password",class:"col-sm-3 col-md-2 col-form-label"},xe={class:"col-sm-4"},Ce={class:"input-group"},Ze=["type"],Me=["onClick"],Ee={class:"inner"},Se={class:"row mb-3"},Fe={for:"hide-ssid",class:"col-sm-3 col-md-2 col-form-label"},Be={class:"col-sm-4"},Le={class:"form-check"},Re=z({__name:"WiFiView",setup(i){const{handleSubmit:o}=ne(),{t:s}=A(),n=h(0),a=h(""),{value:r,errorMessage:k}=D("password",S().required().min(8)),{value:f,errorMessage:V}=D("ssid",S().required()),v=h(!1),q=h(!1),g=h(!1);function Q(){v.value=!v.value}G({handle:(c,t)=>{t?J(s(t),"error"):(a.value=c.hostapd.config,q.value=c.hostapd.isEnabled,E())},document:F`
    query {
      hostapd {
        ...HostapdFragment
      }
    }
    ${B}
  `});const{mutate:I,loading:N}=X({document:F`
    mutation applyHostapd($config: String!, $enable: Boolean!) {
      applyHostapd(config: $config, enable: $enable) {
        ...HostapdFragment
      }
    }
    ${B}
  `}),R=o(async()=>{a.value&&I({config:a.value,enable:q.value})});function x(){const c=H(a.value);C(c,"ssid",f.value??""),C(c,"wpa_passphrase",r.value??""),C(c,"ignore_broadcast_ssid",g.value?"1":"0"),a.value=c.map(t=>t.line).join(`
`)}function E(){var t,T,w;const c=H(a.value);f.value=((t=c.find(m=>m.key=="ssid"))==null?void 0:t.value)??"",r.value=((T=c.find(m=>m.key=="wpa_passphrase"))==null?void 0:T.value)??"",g.value=((w=c.find(m=>m.key=="ignore_broadcast_ssid"))==null?void 0:w.value)==="1"}return(c,t)=>{const T=te,w=oe,m=pe,j=de,K=W;return Z(),M("div",fe,[e("div",ve,[b(T,{current:()=>c.$t("page_title.wifi")},null,8,["current"]),b(w,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=d=>n.value=d),save:l(R),loading:l(N),tabs:["t:basic","/etc/hostapd/hostapd.conf"]},null,8,["modelValue","save","loading","tabs"]),u(e("form",he,[e("div",be,[e("label",qe,p(l(s)("enable")),1),e("div",ge,[e("div",Te,[u(e("input",{class:"form-check-input","onUpdate:modelValue":t[1]||(t[1]=d=>q.value=d),type:"checkbox",id:"is-enabled"},null,512),[[L,q.value]])])])]),e("div",we,[e("label",ye,p(l(s)("wifi.ssid")),1),e("div",$e,[u(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=d=>U(f)?f.value=d:null),class:"form-control",id:"ssid",onChange:x},null,544),[[Y,l(f)]]),u(e("div",{class:"invalid-feedback"},p(l(V)?l(s)(l(V)):""),513),[[_,l(V)]])])]),e("div",ke,[e("label",Ve,p(l(s)("password")),1),e("div",xe,[e("div",Ce,[u(e("input",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=d=>U(r)?r.value=d:null),id:"password",onChange:x,type:v.value?"text":"password"},null,40,Ze),[[ee,l(r)]]),e("a",{href:"#",onClick:se(Q,["prevent"]),class:"input-group-text"},[e("span",Ee,[u(b(m,{class:"bi"},null,512),[[_,v.value]]),u(b(j,{class:"bi"},null,512),[[_,!v.value]])])],8,Me)]),u(e("div",{class:"invalid-feedback"},p(l(k)?l(s)(l(k),{min:8}):""),513),[[_,l(k)]])])]),e("div",Se,[e("label",Fe,p(l(s)("wifi.hide_ssid")),1),e("div",Be,[e("div",Le,[u(e("input",{class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=d=>g.value=d),onChange:x,type:"checkbox",id:"hide-ssid"},null,544),[[L,g.value]])])])])],512),[[_,n.value===0]]),u(b(K,{language:"ini",onChange:E,height:"700",modelValue:a.value,"onUpdate:modelValue":t[5]||(t[5]=d=>a.value=d)},null,8,["modelValue"]),[[_,n.value===1]])])])}}});export{Re as default};
